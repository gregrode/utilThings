<!--
	Script to compile project. Personal settings go in build.properties - please read comments in that file
	for customization.
	
	Otherwise, do not edit this file for your own purposes - only if it fits the needs of the project.
-->

<project name="utilThings" default="build" basedir=".">


	<!-- where are we building the application (may be to a tomcat instance, or just to a build directory) -->
	<property name="bin.home" value="${basedir}/bin" />
	<property name="docs.home" value="${basedir}/docs" />
	<property name="src.home" value="${basedir}/src" />
	<property name="dist.home" value="${basedir}/dist" />
	<property name="lib.home" value="${basedir}/lib" />

	<!-- JAVA COMPILATION PREFERENCES -->
	<property name="compile.debug" value="true" />
	<property name="compile.deprecation" value="false" />
	<property name="compile.optimize" value="true" />

	<!-- here is the version of ivy we will use. change this property to try a newer 
         version if you want -->
	<property name="ivy.install.version" value="2.4.0-rc1" />
	<property name="ivy.jar.dir" value="${basedir}" />
	<property name="ivy.jar.file" value="${ivy.jar.dir}/ivy.jar" />
	<property name="ivy.lib.dir" value="${lib.home}" />
	
	<import file="ivy-build.xml"/>
	
	<!-- ==================== Compilation Classpath =========================== -->
	<path id="compile.classpath">
		<fileset dir="${lib.home}">
			<include name="*.jar" />
		</fileset>
	</path>


	<!-- ==================== Clean Target ==================================== -->
	<!--
		The "clean" target deletes any previous "build" and "dist" directory,
		so that you can be ensured the application can be built from scratch.
	-->
	<target name="clean" description="Delete old build and dist directories">
		<delete dir="${dist.home}" />
	</target>



	<!-- ==================== Compile Target ================================== -->
	<target name="compile" depends="copy" description="Compile Java sources including top model and utilities">

		<!-- compile this project classes -->
		<javac srcdir="${src.home}" destdir="${bin.home}" debug="true" deprecation="${compile.deprecation}" optimize="${compile.optimize}" includeantruntime="false" >
			<classpath refid="compile.classpath" />
		</javac>
	</target>


	<!-- ==================== Dist Target ===================================== -->
	<!-- 
		Creates a package ready for deploying to a web application server.
	-->
	<target name="jar" depends="clean" description="Create jar for distribution">
		<echo> Create application JAR file </echo>
		<jar destfile="${dist.home}/${ant.project.name}.jar" basedir="${bin.home}" update="true"   />
	</target>

	<!-- ==================== Javadoc Target ================================== -->
	<!--
		The "javadoc" target creates Javadoc API documentation for the Java
		classes included in your application.  
	-->
	<target name="javadoc" depends="compile" description="Create Javadoc API documentation">
		<mkdir dir="${docs.home}/api" />
		<javadoc sourcepath="${src.home}" destdir="${docs.home}/api" packagenames="*">
			<classpath refid="compile.classpath" />
		</javadoc>
	</target>


	<!-- ==================== Prepare Target ================================== -->
	<!--
		The "copy" target is used to create the "build" destination directory,
		and copy classes files and properties needed for the JAR.
	-->
	<target name="copy">
		<mkdir dir="${dist.home}" />
		
		<!-- sets properties TODAY, DSTAMP and TSTAMP -->
		<tstamp />
	</target>

	<target name="build" description="Create the common jar." depends="ivy-resolve, jar"/>

</project>
